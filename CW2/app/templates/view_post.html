{% extends "base.html" %}

{% block title %}View Post{% endblock %}

{% block content %}
<div class="content-container">
    <div class="view-post-container">
        <!-- Post Header -->
        <div class="post-header">
            <span class="post-author">@{{ post.author.username }}</span>
            <span class="post-time"> â€¢ {{ post.timestamp.strftime('%Y-%m-%d') }}</span>
        </div>

        <!-- Post Content -->
        <div class="post-content">
            <p>{{ post.content }}</p>
        </div>

        <!-- Post Actions -->
        <div class="post-actions">
            <!-- Like Button -->
            <button type="button" class="btn btn-outline-danger like-button" data-post-id="{{ post.id }}">
                <i class="bi {% if post.is_liked %}bi-heart-fill{% else %}bi-heart{% endif %}"></i>
                ({{ post.like_count }})
            </button>

            <!-- Comment Button -->
            <button type="button" class="btn btn-outline-primary toggle-comment-section">
                View Comments
            </button>

            <!-- Delete Button -->
            {% if post.author.id == current_user.id %}
            <button type="button" class="btn btn-outline-dark delete-post-button" data-post-id="{{ post.id }}">
                <i class="bi bi-trash"></i>
            </button>
            {% endif %}
        </div>

        <!-- Comments Section -->
        <div class="comments-container">
            <h3>Comments</h3>
            {% for comment in comments %}
            <div class="comment">
                <span class="comment-author"><strong>@{{ comment.author.username }}</strong></span>: 
                <span class="comment-content">{{ comment.content }}</span>
            </div>
            {% else %}
            <p>No comments yet. Be the first to comment!</p>
            {% endfor %}
        </div>

        <!-- Add Comment Form -->
        <div class="add-comment-form">
            <form method="POST" action="{{ url_for('comment', post_id=post.id) }}">
                <textarea name="content" placeholder="Write a comment..." rows="2"></textarea>
                <button type="submit" class="btn btn-primary">Post Comment</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
