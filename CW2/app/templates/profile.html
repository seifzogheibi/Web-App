{% extends "base.html" %}

{% block title %}Profile{% endblock %}

{% block content %}
<div class="profile-container">
    <!-- User Info Section -->
    <div class="profile-info">
        <h1>{{ user.username }}</h1>
        <p>Email: {{ user.email }}</p>
        <p>Followers: {{ user.followers.count() }}</p>
        <p>Following: {{ user.following.count() }}</p>

        <!-- Follow/Unfollow Button -->
        {% if user != current_user %}
        <form id="follow-form" method="post" action="{{ url_for('follow', user_id=user.id) }}">
            {% if user in current_user.following %}
            <button type="submit" class="follow-button">Unfollow</button>
            {% else %}
            <button type="submit" class="follow-button">Follow</button>
            {% endif %}
        </form>
        {% endif %}
    </div>

    <!-- User Posts Section -->
    <div class="user-posts">
        <h2>{{ user.username }}'s Posts</h2>
        {% if posts %}
            {% for post in posts %}
            <div class="post">
                <p class="post-timestamp">{{ post.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</p>
                <p class="post-content">{{ post.content }}</p>
            </div>
            {% endfor %}
        {% else %}
            <p>No posts to show yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
